---
title: Python进阶指南
date: 2017-01-27 11:46:34
tags: [Python]
permalink: python-advanced-guide
---
## 1、字典中的键映射多个值 ##
通常方法：
```Python
d = {}
for key, value in pairs:
    if key not in d:
        d[key] = []
    d[key].append(value)
```
进阶方法：
```Python
from collections import defaultdict
d = defaultdict(list)
for key, value in pairs:
    d[key].append(value)
```
<!-- more -->
使用collections模块的defaultdict构造多值字典(keys的values是list，set等)，可以避免初始化数据的麻烦。因此需要注意：访问由defaultdict构造的字典，即便访问的key不存在，也会自动初始化此key的值。
## 2、多个in语句判断 ##
通常方法：
```Python
'str1' in line or 'str2' in line or 'str3' in line
'str1' in line and 'str2' in line and 'str3' in line
```
进阶方法：
```Python
any(s in line for s in ('str1','str2','str3'))
all(s in line for s in ('str1','str2','str3'))
```
> all(iterable) : Return True if all elements of the iterable are true (or if the iterable is empty).等价于：

```Python
def all(iterable):
    for element in iterable:
        if not element:
            return False
    return True
```
> any(iterable) : Return True if any element of the iterable is true. If the iterable is empty, return False.等价于：

```Python
def any(iterable):
    for element in iterable:
        if element:
            return True
    return False
```